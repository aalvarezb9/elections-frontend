<div class="vote-wrapper">
  <mat-card class="container mat-elevation-z6">
    <mat-card-header>
      <mat-card-title>Votación</mat-card-title>
      <mat-card-subtitle>Tu voto es anónimo en esta demo</mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      <div class="form-row">
        <mat-form-field appearance="outline" class="field">
          <mat-label>DNI</mat-label>
          <input matInput [(ngModel)]="dni" placeholder="Ej. 0801-xxxx-xxxxx" />
          <mat-icon matSuffix>badge</mat-icon>
        </mat-form-field>

        <mat-form-field appearance="outline" class="field">
          <mat-label>Huella (demo)</mat-label>
          <input matInput [(ngModel)]="fingerprint" placeholder="Huella simulada" />
          <mat-icon matSuffix>fingerprint</mat-icon>
        </mat-form-field>
      </div>

      <h3 class="section-title">Selecciona tu candidato</h3>

      <div class="grid">
        <mat-card
          class="cand-card mat-elevation-z2"
          *ngFor="let c of candidates; trackBy: trackById"
          [class.selected]="selectedId===c.id"
          matRipple
          (click)="selectedId = c.id"
        >
          <div class="thumb">
            <img [src]="c.imageURI" alt="{{ c.name }}" />
          </div>

          <div class="info">
            <div class="name">{{ c.name }}</div>
            <div class="votes">Votos: {{ c.voteCount }}</div>
          </div>

          <mat-radio-button class="sr-only" [checked]="selectedId===c.id"></mat-radio-button>
        </mat-card>
      </div>

      <div class="actions">
        <button
          mat-raised-button
          color="primary"
          (click)="vote()"
          [disabled]="!dni || !fingerprint || !selectedId"
        >
          Votar
        </button>

        <div class="msg" [class.ok]="msg.startsWith('✅')" [class.err]="!msg.startsWith('✅')">
          {{ msg }}
        </div>
      </div>
    </mat-card-content>
  </mat-card>
</div>
